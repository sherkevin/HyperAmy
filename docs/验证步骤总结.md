# HyperAmy修复验证步骤总结

## 快速开始

### 1️⃣ 小规模测试（10个查询）- 约10-20分钟

```bash
# 连接到服务器
ssh jiangh@10.103.92.120 -p 1066

# 确保代码最新
cd /public/jiangh/HyperAmy
git pull origin master

# 运行验证脚本
source /opt/conda/etc/profile.d/conda.sh
conda activate PyTorch-2.4.1
python -u test/test_hyperamy_quick_validation.py
```

**预期结果**: Recall@5 > 0%，至少有几个查询命中gold_chunk_id

**查看结果**:
```bash
# 查看日志
tail -f test_hyperamy_quick_validation.log

# 查看结果文件
cat outputs/three_methods_comparison_monte_cristo/hyperamy_validation_results.json
```

### 2️⃣ 完整实验（50个查询）- 约14-15小时

```bash
# 确保使用修复后的代码
cd /public/jiangh/HyperAmy
git pull origin master

# 后台运行完整实验
source /opt/conda/etc/profile.d/conda.sh
conda activate PyTorch-2.4.1
nohup python -u test/test_three_methods_comparison_monte_cristo.py > test_three_methods_comparison_monte_cristo_new.log 2>&1 &
echo $! > three_methods_experiment_new.pid
```

**预期结果**: HyperAmy的Recall@K > 0%，所有方法成功运行

**监控进度**:
```bash
tail -f test_three_methods_comparison_monte_cristo_new.log
```

### 3️⃣ 对比分析

```bash
# 在服务器上运行对比分析
cd /public/jiangh/HyperAmy
python3 << 'PYEOF'
import json

# 读取修复前后的结果进行对比
# （修复前: comparison_results.json）
# （修复后: comparison_results_new.json）
# ... 分析代码 ...
PYEOF
```

## 验证成功标准

✅ **小规模测试成功**:
- Recall@5 > 0%
- 至少有几个查询命中gold_chunk_id
- 检索结果不为空

✅ **完整实验成功**:
- 所有方法成功运行（100%可用率）
- HyperAmy Recall@5 > 0%
- 结果文件正确生成

## 详细文档

- 📋 [验证计划](./VALIDATION_PLAN.md) - 完整验证计划
- 📖 [执行指南](./VALIDATION_EXECUTION_GUIDE.md) - 详细执行步骤
- 🔧 [修复总结](./HYPERAMY_FIX_SUMMARY.md) - 修复技术细节

---

**提示**: 如果文件同步有问题，可以从GitHub直接拉取：
```bash
cd /public/jiangh/HyperAmy
git pull origin master
```

