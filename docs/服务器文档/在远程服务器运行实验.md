# 在远程服务器运行严谨实验

## 项目位置
- **路径**: `/media/data4/jiangh/Amygdala/hyperamy_source/`
- **服务器**: vipserver007 (10.103.16.22)
- **用户**: jiangh

## 已同步内容
- ✅ 数据集: `hotpotqa_corpus.json` (991文档), `hotpotqa.json` (100问题)
- ✅ 实验脚本: `test_rigorous_comparison_save.py`
- ✅ 工具脚本: `download_hotpotqa.py`, `run_experiment_background.sh`, `check_experiment_status.sh`

## GPU信息
- **GPU数量**: 7个
- **型号**: RTX 3090 x4, RTX 2080 Ti x2
- **显存状态**: 大部分空闲

## 运行实验

### 方法1: 使用 screen（推荐）
```bash
# SSH连接
ssh jiangh@10.103.16.22

# 进入项目目录
cd /media/data4/jiangh/Amygdala/hyperamy_source

# 启动screen会话
screen -S experiment

# 运行实验
python3 -m test.test_rigorous_comparison_save

# 按 Ctrl+A 然后 D 来detach（保持运行）
# 重新连接: screen -r experiment
```

### 方法2: 后台运行
```bash
# SSH连接
ssh jiangh@10.103.16.22

# 进入项目目录
cd /media/data4/jiangh/Amygdala/hyperamy_source

# 后台运行
nohup python3 -m test.test_rigorous_comparison_save > outputs/rigorous_experiment/logs/experiment_$(date +%Y%m%d_%H%M%S).log 2>&1 &

# 查看日志
tail -f outputs/rigorous_experiment/logs/experiment_*.log
```

### 方法3: 使用提供的脚本
```bash
# SSH连接
ssh jiangh@10.103.16.22

# 进入项目目录
cd /media/data4/jiangh/Amygdala/hyperamy_source

# 使用后台运行脚本
./scripts/run_experiment_background.sh

# 检查状态
./scripts/check_experiment_status.sh
```

## 监控实验

### 查看实时日志
```bash
# 查看最新日志
tail -f outputs/rigorous_experiment/logs/experiment_*.log

# 或查看最后100行
tail -100 outputs/rigorous_experiment/logs/experiment_*.log
```

### 检查结果文件
```bash
# 检查结果文件是否存在
ls -lh outputs/rigorous_experiment/*.json

# 查看对比结果
cat outputs/rigorous_experiment/comparison_results.json
```

### 检查进程
```bash
# 查看实验进程
ps aux | grep test_rigorous_comparison_save

# 查看GPU使用情况
nvidia-smi
```

## 预计时间
- **总时间**: 2-4 小时
- **Baseline**: 40-80 分钟
- **Enhanced**: 85-170 分钟

## 优势
1. **GPU加速**: 7个GPU可用，可以加速模型推理
2. **显存充足**: 大部分GPU显存空闲
3. **网络稳定**: 服务器环境，适合长时间运行
4. **无需保持本地电脑开机**: 在服务器上运行

## 注意事项
1. 确保 `.env` 文件中的 API 配置正确
2. 确保有足够的磁盘空间
3. 实验支持断点续传，如果中断可以重新运行

